{% extends 'base.html' %}
{% load static %}

{% block title %}Tour Packages - Wond'r NEUB{% endblock %}

{% block content %}
<section class="tour-packages-section" style="padding: 40px 20px; background: linear-gradient(135deg, #e6fcee 0%, #d4f5e0 100%); min-height: calc(100vh - 200px);">
    <!-- Page Header -->
    <div class="page-header" style="max-width: 1400px; margin: 0 auto 40px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;">
        <h1 style="color: var(--dark); font-size: 2.2rem; margin: 0;">
            <i class="fas fa-suitcase-rolling"></i> Tour Packages
        </h1>
        {% if user.is_staff or user.is_superuser %}
        <a href="{% url 'select_package_category' %}" class="add-package-btn" style="background: var(--primary); color: white; padding: 12px 25px; border-radius: 8px; text-decoration: none; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s; box-shadow: 0 4px 15px rgba(41, 163, 92, 0.3);">
            <i class="fas fa-plus-circle"></i> Add New Package
        </a>
        {% endif %}
    </div>

    <!-- Study Tour Section -->
    <div class="category-section" style="max-width: 1400px; margin: 0 auto 50px;">
        <div class="category-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 0 10px;">
            <h2 style="color: var(--dark); font-size: 1.6rem; margin: 0; display: flex; align-items: center; gap: 12px;">
                <span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 10px; border-radius: 10px;">
                    <i class="fas fa-book-reader" style="color: white;"></i>
                </span>
                Study Tour
            </h2>
            <a href="{% url 'study_tour_packages' %}" style="color: var(--primary); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        {% if study_tour_packages %}
        <div class="scroll-container" style="overflow-x: auto; padding: 10px 0 20px; scrollbar-width: thin; scrollbar-color: var(--primary) #e0e0e0;">
            <div class="packages-row" style="display: flex; gap: 25px; padding: 10px;">
                {% for package in study_tour_packages %}
                <div class="package-card" style="min-width: 320px; max-width: 320px; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; flex-shrink: 0;">
                    <div class="package-image" style="height: 200px; overflow: hidden; position: relative;">
                        {% if package.image %}
                        <img src="{{ package.image.url }}" alt="{{ package.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-book-reader" style="font-size: 60px; color: rgba(255,255,255,0.5);"></i>
                        </div>
                        {% endif %}
                        <div class="package-price-badge" style="position: absolute; top: 15px; right: 15px; background: var(--primary); color: white; padding: 8px 15px; border-radius: 20px; font-weight: 700;">
                            ৳{{ package.price|floatformat:0 }}
                        </div>
                        <div style="position: absolute; top: 15px; left: 15px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 5px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: 600;">
                            Study Tour
                        </div>
                    </div>
                    <div class="package-content" style="padding: 20px;">
                        <h3 style="color: var(--dark); font-size: 1.3rem; margin-bottom: 10px;">{{ package.name }}</h3>
                        <div class="package-meta" style="display: flex; gap: 15px; margin-bottom: 15px; font-size: 0.9rem; color: #666;">
                            <span><i class="fas fa-map-marker-alt" style="color: var(--primary);"></i> {{ package.destination }}</span>
                            <span><i class="fas fa-clock" style="color: var(--primary);"></i> {{ package.duration }}</span>
                        </div>
                        <p style="color: #666; font-size: 0.95rem; line-height: 1.5; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            {{ package.description|truncatewords:20 }}
                        </p>
                        <div class="action-buttons" style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <button onclick="showPackageDetails('{{ package.id }}', '{{ package.name|escapejs }}', '{{ package.destination|escapejs }}', '{{ package.duration|escapejs }}', '{{ package.price }}', '{{ package.description|escapejs }}', '{% if package.image %}{{ package.image.url }}{% endif %}')" class="view-btn" style="{% if user.is_staff or user.is_superuser %}width: 100%;{% else %}flex: 1;{% endif %} padding: 12px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                                <i class="fas fa-eye"></i> View
                            </button>
                            {% if not user.is_staff and not user.is_superuser %}
                            <a href="{% if user.is_authenticated %}{% url 'book_package' package.id %}{% else %}{% url 'login' %}?next={% url 'book_package' package.id %}{% endif %}" class="book-btn" style="flex: 1; text-align: center; padding: 12px; background: var(--primary); color: white; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s;">
                                <i class="fas fa-bookmark"></i> Book
                            </a>
                            {% endif %}
                        </div>
                        {% if user.is_staff or user.is_superuser %}
                        <div class="admin-actions" style="display: flex; gap: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                            <a href="{% url 'edit_package' package.id %}" style="flex: 1; text-align: center; padding: 8px; background: #ffc107; color: #333; border-radius: 5px; text-decoration: none; font-weight: 500; font-size: 0.85rem;">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{% url 'delete_package' package.id %}" style="flex: 1; text-align: center; padding: 8px; background: #dc3545; color: white; border-radius: 5px; text-decoration: none; font-weight: 500; font-size: 0.85rem;">
                                <i class="fas fa-trash"></i> Delete
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="background: white; padding: 40px; border-radius: 15px; text-align: center; color: #666;">
            <i class="fas fa-book-reader" style="font-size: 40px; color: #ccc; margin-bottom: 15px;"></i>
            <p style="margin: 0;">No study tour packages available yet.</p>
        </div>
        {% endif %}
    </div>

    <!-- Cycling Section -->
    <div class="category-section" style="max-width: 1400px; margin: 0 auto 50px;">
        <div class="category-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 0 10px;">
            <h2 style="color: var(--dark); font-size: 1.6rem; margin: 0; display: flex; align-items: center; gap: 12px;">
                <span style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 10px; border-radius: 10px;">
                    <i class="fas fa-bicycle" style="color: white;"></i>
                </span>
                Cycling Adventures
            </h2>
            <a href="{% url 'cycling_packages' %}" style="color: var(--primary); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        {% if cycling_packages %}
        <div class="scroll-container" style="overflow-x: auto; padding: 10px 0 20px; scrollbar-width: thin; scrollbar-color: var(--primary) #e0e0e0;">
            <div class="packages-row" style="display: flex; gap: 25px; padding: 10px;">
                {% for package in cycling_packages %}
                <div class="package-card" style="min-width: 320px; max-width: 320px; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; flex-shrink: 0;">
                    <div class="package-image" style="height: 200px; overflow: hidden; position: relative;">
                        {% if package.image %}
                        <img src="{{ package.image.url }}" alt="{{ package.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #f093fb, #f5576c); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-bicycle" style="font-size: 60px; color: rgba(255,255,255,0.5);"></i>
                        </div>
                        {% endif %}
                        <div class="package-price-badge" style="position: absolute; top: 15px; right: 15px; background: var(--primary); color: white; padding: 8px 15px; border-radius: 20px; font-weight: 700;">
                            ৳{{ package.price|floatformat:0 }}
                        </div>
                        <div style="position: absolute; top: 15px; left: 15px; background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 5px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: 600;">
                            Cycling
                        </div>
                    </div>
                    <div class="package-content" style="padding: 20px;">
                        <h3 style="color: var(--dark); font-size: 1.3rem; margin-bottom: 10px;">{{ package.name }}</h3>
                        <div class="package-meta" style="display: flex; gap: 15px; margin-bottom: 15px; font-size: 0.9rem; color: #666;">
                            <span><i class="fas fa-map-marker-alt" style="color: var(--primary);"></i> {{ package.destination }}</span>
                            <span><i class="fas fa-clock" style="color: var(--primary);"></i> {{ package.duration }}</span>
                        </div>
                        <p style="color: #666; font-size: 0.95rem; line-height: 1.5; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            {{ package.description|truncatewords:20 }}
                        </p>
                        <div class="action-buttons" style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <button onclick="showPackageDetails('{{ package.id }}', '{{ package.name|escapejs }}', '{{ package.destination|escapejs }}', '{{ package.duration|escapejs }}', '{{ package.price }}', '{{ package.description|escapejs }}', '{% if package.image %}{{ package.image.url }}{% endif %}')" class="view-btn" style="{% if user.is_staff or user.is_superuser %}width: 100%;{% else %}flex: 1;{% endif %} padding: 12px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                                <i class="fas fa-eye"></i> View
                            </button>
                            {% if not user.is_staff and not user.is_superuser %}
                            <a href="{% if user.is_authenticated %}{% url 'book_package' package.id %}{% else %}{% url 'login' %}?next={% url 'book_package' package.id %}{% endif %}" class="book-btn" style="flex: 1; text-align: center; padding: 12px; background: var(--primary); color: white; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s;">
                                <i class="fas fa-bookmark"></i> Book
                            </a>
                            {% endif %}
                        </div>
                        {% if user.is_staff or user.is_superuser %}
                        <div class="admin-actions" style="display: flex; gap: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                            <a href="{% url 'edit_package' package.id %}" style="flex: 1; text-align: center; padding: 8px; background: #ffc107; color: #333; border-radius: 5px; text-decoration: none; font-weight: 500; font-size: 0.85rem;">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{% url 'delete_package' package.id %}" style="flex: 1; text-align: center; padding: 8px; background: #dc3545; color: white; border-radius: 5px; text-decoration: none; font-weight: 500; font-size: 0.85rem;">
                                <i class="fas fa-trash"></i> Delete
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="background: white; padding: 40px; border-radius: 15px; text-align: center; color: #666;">
            <i class="fas fa-bicycle" style="font-size: 40px; color: #ccc; margin-bottom: 15px;"></i>
            <p style="margin: 0;">No cycling packages available yet.</p>
        </div>
        {% endif %}
    </div>

    <!-- University Programs Section -->
    <div class="category-section" style="max-width: 1400px; margin: 0 auto 50px;">
        <div class="category-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding: 0 10px;">
            <h2 style="color: var(--dark); font-size: 1.6rem; margin: 0; display: flex; align-items: center; gap: 12px;">
                <span style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 10px; border-radius: 10px;">
                    <i class="fas fa-university" style="color: white;"></i>
                </span>
                University Programs
            </h2>
            <a href="{% url 'university_program_packages' %}" style="color: var(--primary); text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 5px;">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>
        {% if university_packages %}
        <div class="scroll-container" style="overflow-x: auto; padding: 10px 0 20px; scrollbar-width: thin; scrollbar-color: var(--primary) #e0e0e0;">
            <div class="packages-row" style="display: flex; gap: 25px; padding: 10px;">
                {% for package in university_packages %}
                <div class="package-card" style="min-width: 320px; max-width: 320px; background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 5px 20px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; flex-shrink: 0;">
                    <div class="package-image" style="height: 200px; overflow: hidden; position: relative;">
                        {% if package.image %}
                        <img src="{{ package.image.url }}" alt="{{ package.name }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                        <div style="width: 100%; height: 100%; background: linear-gradient(135deg, #4facfe, #00f2fe); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-university" style="font-size: 60px; color: rgba(255,255,255,0.5);"></i>
                        </div>
                        {% endif %}
                        <div class="package-price-badge" style="position: absolute; top: 15px; right: 15px; background: var(--primary); color: white; padding: 8px 15px; border-radius: 20px; font-weight: 700;">
                            ৳{{ package.price|floatformat:0 }}
                        </div>
                        <div style="position: absolute; top: 15px; left: 15px; background: linear-gradient(135deg, #4facfe, #00f2fe); color: white; padding: 5px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: 600;">
                            University Program
                        </div>
                    </div>
                    <div class="package-content" style="padding: 20px;">
                        <h3 style="color: var(--dark); font-size: 1.3rem; margin-bottom: 10px;">{{ package.name }}</h3>
                        <div class="package-meta" style="display: flex; gap: 15px; margin-bottom: 15px; font-size: 0.9rem; color: #666;">
                            <span><i class="fas fa-map-marker-alt" style="color: var(--primary);"></i> {{ package.destination }}</span>
                            <span><i class="fas fa-clock" style="color: var(--primary);"></i> {{ package.duration }}</span>
                        </div>
                        <p style="color: #666; font-size: 0.95rem; line-height: 1.5; margin-bottom: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                            {{ package.description|truncatewords:20 }}
                        </p>
                        <div class="action-buttons" style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <button onclick="showPackageDetails('{{ package.id }}', '{{ package.name|escapejs }}', '{{ package.destination|escapejs }}', '{{ package.duration|escapejs }}', '{{ package.price }}', '{{ package.description|escapejs }}', '{% if package.image %}{{ package.image.url }}{% endif %}')" class="view-btn" style="{% if user.is_staff or user.is_superuser %}width: 100%;{% else %}flex: 1;{% endif %} padding: 12px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s;">
                                <i class="fas fa-eye"></i> View
                            </button>
                            {% if not user.is_staff and not user.is_superuser %}
                            <a href="{% if user.is_authenticated %}{% url 'book_package' package.id %}{% else %}{% url 'login' %}?next={% url 'book_package' package.id %}{% endif %}" class="book-btn" style="flex: 1; text-align: center; padding: 12px; background: var(--primary); color: white; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.3s;">
                                <i class="fas fa-bookmark"></i> Book
                            </a>
                            {% endif %}
                        </div>
                        {% if user.is_staff or user.is_superuser %}
                        <div class="admin-actions" style="display: flex; gap: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                            <a href="{% url 'edit_package' package.id %}" style="flex: 1; text-align: center; padding: 8px; background: #ffc107; color: #333; border-radius: 5px; text-decoration: none; font-weight: 500; font-size: 0.85rem;">
                                <i class="fas fa-edit"></i> Edit
                            </a>
                            <a href="{% url 'delete_package' package.id %}" style="flex: 1; text-align: center; padding: 8px; background: #dc3545; color: white; border-radius: 5px; text-decoration: none; font-weight: 500; font-size: 0.85rem;">
                                <i class="fas fa-trash"></i> Delete
                            </a>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% else %}
        <div style="background: white; padding: 40px; border-radius: 15px; text-align: center; color: #666;">
            <i class="fas fa-university" style="font-size: 40px; color: #ccc; margin-bottom: 15px;"></i>
            <p style="margin: 0;">No university program packages available yet.</p>
        </div>
        {% endif %}
    </div>

    <!-- No Packages at All -->
    {% if not study_tour_packages and not cycling_packages and not university_packages %}
    <div class="no-packages" style="text-align: center; padding: 60px 20px; background: white; border-radius: 15px; max-width: 600px; margin: 0 auto;">
        <i class="fas fa-box-open" style="font-size: 60px; color: #ccc; margin-bottom: 20px;"></i>
        <h3 style="color: #666; margin-bottom: 10px;">No Tour Packages Available</h3>
        <p style="color: #999;">Check back later for exciting tour packages!</p>
        {% if user.is_staff or user.is_superuser %}
        <a href="{% url 'select_package_category' %}" style="display: inline-block; margin-top: 20px; background: var(--primary); color: white; padding: 12px 30px; border-radius: 8px; text-decoration: none; font-weight: 600;">
            <i class="fas fa-plus-circle"></i> Add Your First Package
        </a>
        {% endif %}
    </div>
    {% endif %}
</section>

<!-- Package Detail Modal -->
<div id="packageDetailModal" class="package-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; justify-content: center; align-items: center; padding: 20px;">
    <div class="modal-content" style="background: white; border-radius: 20px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto; position: relative; animation: modalSlideIn 0.3s ease;">
        <button onclick="closePackageModal()" style="position: absolute; top: 15px; right: 15px; background: #dc3545; color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 20px; z-index: 10; transition: all 0.3s;">
            <i class="fas fa-times"></i>
        </button>
        
        <div id="modalImage" style="width: 100%; height: 300px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 20px 20px 0 0; overflow: hidden;">
            <img id="modalImageSrc" src="" alt="" style="width: 100%; height: 100%; object-fit: cover; display: none;">
            <div id="modalImagePlaceholder" style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                <i class="fas fa-mountain" style="font-size: 80px; color: rgba(255,255,255,0.5);"></i>
            </div>
        </div>
        
        <div style="padding: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 15px; margin-bottom: 20px;">
                <h2 id="modalTitle" style="color: var(--dark); font-size: 1.8rem; margin: 0;"></h2>
                <div id="modalPrice" style="background: var(--primary); color: white; padding: 10px 20px; border-radius: 25px; font-size: 1.3rem; font-weight: 700;"></div>
            </div>
            
            <div style="display: flex; gap: 20px; margin-bottom: 25px; flex-wrap: wrap;">
                <div style="display: flex; align-items: center; gap: 8px; background: #f8f9fa; padding: 10px 15px; border-radius: 8px;">
                    <i class="fas fa-map-marker-alt" style="color: var(--primary); font-size: 1.2rem;"></i>
                    <span id="modalDestination" style="font-weight: 600; color: #333;"></span>
                </div>
                <div style="display: flex; align-items: center; gap: 8px; background: #f8f9fa; padding: 10px 15px; border-radius: 8px;">
                    <i class="fas fa-clock" style="color: var(--primary); font-size: 1.2rem;"></i>
                    <span id="modalDuration" style="font-weight: 600; color: #333;"></span>
                </div>
            </div>
            
            <div style="margin-bottom: 25px;">
                <h3 style="color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-info-circle"></i> Description
                </h3>
                <p id="modalDescription" style="color: #555; line-height: 1.8; font-size: 1rem;"></p>
            </div>
            
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                {% if not user.is_staff and not user.is_superuser %}
                <a id="modalBookBtn" href="#" class="modal-book-btn" style="flex: 1; min-width: 200px; text-align: center; padding: 15px 30px; background: var(--primary); color: white; border-radius: 10px; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: all 0.3s; display: inline-flex; align-items: center; justify-content: center; gap: 10px;">
                    <i class="fas fa-bookmark"></i> Book This Package
                </a>
                {% endif %}
                <button onclick="closePackageModal()" style="{% if user.is_staff or user.is_superuser %}width: 100%;{% else %}flex: 1; min-width: 150px;{% endif %} padding: 15px 30px; background: #6c757d; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 1.1rem; transition: all 0.3s;">
                    <i class="fas fa-arrow-left"></i> Back
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    :root {
        --primary: #29a35c;
        --secondary: #2d5e58;
        --dark: #1e4e41;
    }
    
    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: translateY(-50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .scroll-container::-webkit-scrollbar {
        height: 8px;
    }
    
    .scroll-container::-webkit-scrollbar-track {
        background: #e0e0e0;
        border-radius: 10px;
    }
    
    .scroll-container::-webkit-scrollbar-thumb {
        background: var(--primary);
        border-radius: 10px;
    }
    
    .scroll-container::-webkit-scrollbar-thumb:hover {
        background: var(--dark);
    }
    
    .package-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.15) !important;
    }
    
    .view-btn:hover {
        background: #138496 !important;
        transform: scale(1.02);
    }
    
    .book-btn:hover {
        background: var(--dark) !important;
        transform: scale(1.02);
    }
    
    .modal-book-btn:hover {
        background: var(--dark) !important;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .add-package-btn:hover {
        background: var(--dark) !important;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(41, 163, 92, 0.4) !important;
    }
    
    .category-header a:hover {
        text-decoration: underline;
    }
    
    @media (max-width: 768px) {
        .page-header {
            flex-direction: column;
            text-align: center;
        }
        
        .category-header {
            flex-direction: column;
            text-align: center;
            gap: 10px;
        }
        
        .category-header h2 {
            font-size: 1.3rem !important;
        }
        
        .package-card {
            min-width: 280px !important;
            max-width: 280px !important;
        }
        
        .modal-content {
            margin: 10px;
        }
        
        #modalImage {
            height: 200px !important;
        }
    }
</style>

<script>
function showPackageDetails(id, name, destination, duration, price, description, imageUrl) {
    const modal = document.getElementById('packageDetailModal');
    const modalImageSrc = document.getElementById('modalImageSrc');
    const modalImagePlaceholder = document.getElementById('modalImagePlaceholder');
    
    document.getElementById('modalTitle').textContent = name;
    document.getElementById('modalDestination').textContent = destination;
    document.getElementById('modalDuration').textContent = duration;
    document.getElementById('modalPrice').textContent = '৳' + parseFloat(price).toLocaleString();
    document.getElementById('modalDescription').textContent = description;
    
    if (imageUrl) {
        modalImageSrc.src = imageUrl;
        modalImageSrc.style.display = 'block';
        modalImagePlaceholder.style.display = 'none';
    } else {
        modalImageSrc.style.display = 'none';
        modalImagePlaceholder.style.display = 'flex';
    }
    
    // Set book button URL
    const bookBtn = document.getElementById('modalBookBtn');
    if (bookBtn) {
        {% if user.is_authenticated %}
        bookBtn.href = "{% url 'book_package' 0 %}".replace('0', id);
        {% else %}
        bookBtn.href = "{% url 'login' %}?next=" + "{% url 'book_package' 0 %}".replace('0', id);
        {% endif %}
    }
    
    modal.style.display = 'flex';
    document.body.style.overflow = 'hidden';
}

function closePackageModal() {
    const modal = document.getElementById('packageDetailModal');
    modal.style.display = 'none';
    document.body.style.overflow = 'auto';
}

// Close modal when clicking outside
document.getElementById('packageDetailModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closePackageModal();
    }
});

// Close modal with Escape key
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closePackageModal();
    }
});
</script>
{% endblock %}